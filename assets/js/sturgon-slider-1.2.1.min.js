function get_thanas(a,b){var c=$("#pd_stu").val();$.ajax({context:this,url:c+"weapons/get_thanas",type:"get",dataType:"json",cache:!0,data:{district:a},beforeSend:function(){$("#"+b).parent().append('<small id="text_loader">Loading thanas...</small>')},complete:function(){$("#text_loader").remove()}}).done(function(a){for(var c="",d=0;d<a.length;d++)c+='<option value="'+a[d].id+'">'+a[d].thana+"</option>";$("#"+b).html(c)})}function check_duplicacy(a,b,c){var d=$("#pd_stu").val(),e=$('input[name="pd_identity"]').val();$.ajax({context:this,url:d+"/weapons/check_duplicate",type:"get",dataType:"json",cache:!0,data:{vh:a,fp:b,tp:c,pd:e}}).done(function(a){a.exist>0&&swal("Route Exist Already","Please try another","warning")})}$(document).ready(function(){var a=null;$(".search_place").keyup(function(b){var c=b.keyCode;if(40==c||38==c||13==c)return!1;null!==a&&(a.abort(),a=null);var d=$(this).parent().prev().prev().find("select").val(),e=$(this).parent().prev().find("select").val(),f=$.trim($(this).val());if(!f.length)return!1;var g=$("#pd_stu").val(),h=$("#pd_btu").val();a=$.ajax({context:this,url:g+"weapons/get_places",type:"get",dataType:"json",cache:!0,data:{typing:f,d:d,t:e},beforeSend:function(){$(this).parent().append('<img id="loader" src="'+h+'assets/images/loading.gif" alt="Loading"/>')},complete:function(){$("#loader").remove()}}).done(function(a){$("#loader").remove();for(var b="",c=$('input[name="f"]').val(),d=0;d<a.length;d++)a[d].Location==c&&a.splice(d,1),b+='<a href="javascript:void(0);" class="list-group-item">'+a[d].Location+"</a>";$(this).next().show().html(b)})}),$("#fare_verfication a").click(function(a){a.preventDefault();var b=$("#pd_identity").val(),c=$("#pd_stu").val(),d=$(this).data("pd_fp");$.ajax({context:this,url:c+"weapons/update_meta",type:"post",dataType:"json",cache:!0,data:{pd_identity:b,pd_sts:d},beforeSend:function(){$(this).addClass("disabled")}}).done(function(a){"exist"===a.msg&&swal("Already given","You vote once earlier in this route","warning"),"updated"===a.msg&&(swal("Thank you","You vote taken","success"),"pd_fpk"===d?$("#pd_crc").text(a.v):$("#pd_wrn").text(a.v)),$(this).removeClass("disabled")})});var b=null;$("#stoppage_section").on("keyup",".place_name",function(c){var d=c.keyCode;if(40==d||38==d||13==d)return!1;null!==b&&(b.abort(),b=null);var e=$.trim($(this).val());if(!e.length)return!1;var f=$("#pd_stu").val();a=$.ajax({context:this,url:f+"weapons/stoppage_search",type:"get",dataType:"json",cache:!0,data:{typing:e}}).done(function(a){for(var b="",c=0;c<a.length;c++)b+='<a href="javascript:void(0);" class="list-group-item">'+a[c].place_name+"</a>";$(this).next().show().html(b)})});var c=null;$("#search_place").keyup(function(b){var d=b.keyCode;if(40==d||38==d||13==d)return!1;null!==c&&(c.abort(),c=null);var e=$("#district").val(),f=$.trim($(this).val());if(!f.length)return!1;var g=$("#pd_stu").val(),h=$("#pd_stu").val();a=$.ajax({context:this,url:g+"weapons/search_places",type:"get",dataType:"json",cache:!0,data:{typing:f,d:e},beforeSend:function(){$(this).parent().append('<img id="loader" src="'+h+'assets/images/loading.gif" alt="Loading"/>')},complete:function(){$("#loader").remove()}}).done(function(a){$("#loader").remove();for(var b="",c=0;c<a.length;c++)b+='<a href="javascript:void(0);" class="list-group-item">'+a[c].Location+"</a>";$(this).next().show().html(b)})}),$("#stoppage_section").on("keydown",".place_name",function(a){var e,b=$(this).next().find("a"),c=a.keyCode,d=b.filter(".selected");if(40==c||38==c||13==c){if(40==c)b.removeClass("selected"),e=!d.length||d.is(":last-child")?b.eq(0):d.next();else if(38==c)b.removeClass("selected"),e=!d.length||d.is(":first-child")?b.last():d.prev();else if(13==c)return e=b.filter(".selected"),e.trigger("click"),!1;e.addClass("selected")}}),$("#verify_form").submit(function(a){a.preventDefault();var b=$("#pd_stu").val(),c=$("#pd_btu").val(),d=$("#pd_identity").val(),e=$("#latest_status").val(),f=$("#note").val();$.ajax({context:this,url:b+"weapons/send_verification",type:"post",dataType:"json",cache:!0,data:{latest_status:e,note:f,pd_identity:d},beforeSend:function(){$(this).parent().append('<img id="loader" src="'+c+'assets/images/loading.gif" alt="Loading"/>'),$("#complain .close_btn").prop("disabled",!0)},complete:function(){$("#loader").remove(),$("#complain .close_btn").prop("disabled",!1)}}).done(function(a){$("#loader").remove(),$("#compalin").modal("hide"),"yes"==a.sent?swal("Verification Sent","Thanks for your info","success"):swal("Problem","Something gone wrong","error")})}),$(".search_place,#vehicle_name,#search_place").on("keydown",function(a){var e,b=$(this).next().find("a"),c=a.keyCode,d=b.filter(".selected");if(40==c||38==c||13==c){if(40==c)b.removeClass("selected"),e=!d.length||d.is(":last-child")?b.eq(0):d.next();else if(38==c)b.removeClass("selected"),e=!d.length||d.is(":first-child")?b.last():d.prev();else if(13==c)return e=b.filter(".selected"),e.trigger("click"),!1;e.addClass("selected")}});var d=null;$("#vehicle_name").keyup(function(a){var b=a.keyCode;if(40==b||38==b||13==b)return!1;null!==d&&(d.abort(),d=null);var c=$.trim($(this).val());if(!c.length)return!1;var e=$("#pd_stu").val(),f=$("#pd_btu").val();d=$.ajax({context:this,url:e+"/weapons/get_transports",type:"get",dataType:"json",cache:!0,data:{typing:c},beforeSend:function(){$(this).parent().append('<img id="loader" src="'+f+'assets/images/loading.gif" alt="Loaind" />')},complete:function(){$("#loader").remove()}}).done(function(a){$("#loader").remove();for(var b="",c=0;c<a.length;c++)b+='<a href="javascript:void(0);" class="list-group-item">'+a[c].poribohon+"</a>";$(this).next().show().html(b)})}),$("#vehicle_name").on("blur change",function(){var a=$(this).val(),b=$('input[name="f"]').val(),c=$('input[name="t"]').val();check_duplicacy(a,b,c)}),$("#vehicle .list-group").on("click",".list-group-item",function(){var a=$(this).text(),b=$('input[name="f"]').val(),c=$('input[name="t"]').val();check_duplicacy(a,b,c)}),$(".transport_name").on("blur change",function(){var a=$("#pd_stu").val(),b=$(this).val();if(b.length<1)return!1;var c=$("#pd_identity").val();$.ajax({context:this,url:a+"weapons/transport_duplicacy",type:"post",dataType:"json",cache:!0,data:{name:b,pd:c}}).done(function(a){"yes"==a.exist&&swal("Transpport Exist","This transport already exist","error")})}),$("#main_search .search_place").blur(function(){var a=$(this).val();a.length>0&&$(this).removeAttr("style")}),$(".evidence").change(function(){var a=this.files[0],b=a.name,c=b.split(".").pop().toLowerCase(),d=["jpg","png","gif","jpeg"];return""===a||-1===$.inArray(c,d)?(swal("Allowed Types","jpg, png, gif, jpeg","warning"),!1):void 0}),$('select[name="fd"]').change(function(){var a=$.trim($(this).val()),b=$(this).data("thana");get_thanas(a,b)}),$('select[name="td"]').change(function(){var a=$.trim($(this).val()),b=$(this).data("thana");get_thanas(a,b)}),$("#suggestion_page .list-group").on("click",".list-group-item",function(){var a=$(this).text();$(this).parent().prev().val(a),$(this).parent().empty(),$('#main_search input[name="f"],#main_search input[name="t"]').removeAttr("style")}),$("#stoppage_section .list-group-item").live("click",function(){var a=$(this).text();$(this).parent().prev().val(a),$(this).parent().empty()}),$(document).click(function(){$("#suggestion_page .list-group").empty()}),$("#add_stoppage").click(function(){var a=$("#place_name").val(),b=$("#comment").val(),c=$("#rents").val();$("#stoppage_section").show(),$('<div class="form-group stoppage"><div class="col-xs-10 col-md-4"><input maxlength="150" type="text" class="form-control place_name" name="place_name[]" placeholder="'+a+'" autocomplete="off"><div class="list-group suggestion"></div></div><div class="col-xs-10 col-md-5"><textarea maxlength="1000" class="form-control" name="comments[]" placeholder="'+b+'"></textarea></div><div class="col-xs-10 col-md-2"><input maxlength="10" type="text" class="form-control rent" name="rent[]" placeholder="'+c+'"></div><button class="btn btn-xs btn-danger" href="javascript:void(0)" class="cancel"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></div>').appendTo($("#stoppage_section")).hide().slideDown()}),$("#stoppage_section").on("click","button",function(a){a.preventDefault();var b=$("#pd_stu").val(),c=$("#pd_identity").val(),d=$(this).parent().find(".place_name").val();confirm("Are you Sure?")&&($.ajax({context:this,url:b+"weapons/delete_stopage",type:"get",dataType:"json",cache:!0,data:{pri:c,jaig:d}}).done(function(a){if("done"==a.deleted&&$("#point").length>0){var b=parseInt($("#point").val()),c=b-1;$("#point").val(c)}}),$(this).parent().fadeOut("normal",function(){$(this).remove(),$(".order_pos").each(function(a){var b=a+1;$(this).val(b)})}))}),$("#transport").on("click",".remove_address",function(a){return a.preventDefault(),confirm("Are you Sure?")?($(this).parent().parent().remove(),!1):void 0}),$(".add_district").on("change",function(){var a=$.trim($(this).val()),b=$("#pd_stu").val();$.ajax({context:this,url:b+"weapons/get_thanas",type:"get",dataType:"json",cache:!0,data:{district:a},beforeSend:function(){$(this).parent().next().find(".thana").parent().append('<small id="text_loader">Loading thanas...</small>')},complete:function(){$("#text_loader").remove()}}).done(function(a){for(var b="",c=0;c<a.length;c++)b+='<option value="'+a[c].id+'">'+a[c].thana+"</option>";$(this).parent().next().find(".thana").html(b)})}),$("#add_address").on("click",function(){var a=$("div.address:first"),b=a.find("select.add_district option:selected").val(),c=a.clone(!0,!0);c.find("textarea").val(""),c.find("textarea").css("width","190px"),c.find("select.add_district").val(b),c.find("select.add_district").trigger("change"),$(c).insertAfter("div.address:last").hide().slideDown(),$('<button class="btn btn-xs btn-danger remove_address"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>').insertAfter("div.address:last .add_details")}),$("#departure_time").change(function(){2==$(this).val()?$('<div id="departure_dynamic" class="form-group"><div class="col-md-12"><textarea id="custom_area" rows="10" class="form-control" name="departure_dynamic">Example:\nMorning\n==========\nAC - 9 AM\nNon AC - 9.30 AM\nNight\n==============\nNon AC - 10 PM\nAC : 11 PM</textarea></div></div>').insertAfter("#departure_perticular").hide().slideDown():$("#departure_dynamic").slideUp(500,function(){$("#departure_dynamic").remove()}),"yes"==$(this).data("merge")&&($("#departure_dynamic label").removeClass("col-sm-3"),$("#departure_dynamic label + div").removeClass("col-xs-10 col-md-6"))}),$("#chkUsername").on("blur",function(){is_exist("chkUsername","username","users","userInfo")}),$("#chkEmail").on("blur",function(){var a=$("#chkEmail").val(),b=$("#email_text").val(),c=$(".wrong_email").is(":visible"),d=/^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;if(d.test(a))$(".wrong_email").fadeOut("normal",function(){$(this).remove()}),is_exist("chkEmail","email","users","emailInfo");else if(!c)return $('<div class="alert alert-warning wrong_email">'+b+"</div>").insertAfter("#emailInfo").hide().slideDown(),!1}),$("form").on("blur",".rent",function(){var a=replaceNumbers($(this).val());$(this).val(a);var b=parseInt(a);isNaN(b)||b<1?($(this).parent().find(".alert").remove(),$(this).parent().append('<div class="alert alert-danger">Numbers only</div>'),$(this).val("")):$(this).parent().find(".alert").remove()}),$("#social_link1").hover(function(){$(this).stop(!0,!0).animate({width:"+=105px"},100,"",function(){if($(this).children("span").length<1){var a=$("#find_fb").val();$(this).append("<span>"+a+"</span>")}})},function(){$(this).children("span").remove(),$(this).stop(!0,!0).animate({width:"-=105px"})}),$("#social_link2").hover(function(){$(this).stop(!0,!0).animate({width:"+=105px"},100,"",function(){if($(this).children("span").length<1){var a=$("#find_tw").val();$(this).append("<span>"+a+"</span>")}})},function(){$(this).children("span").remove(),$(this).stop(!0,!0).animate({width:"-=105px"})}),$("#social_link1,#social_link2").mouseleave(function(){$(this).children("span").remove()})});